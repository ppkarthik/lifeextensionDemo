var stjude=stjude||{};
stjude.dprforms=stjude.dprforms||{};
stjude.dprforms.countryselection=(function(c,e){function f(k){var l="; "+document.cookie;
var m=l.split("; "+k+"=");
if(m.length==2){return m.pop().split(";").shift()
}}function j(n,m){if(n!==undefined){var o=n.split(",");
for(var l=0;
l<o.length;
l++){var k=o[l].split("=");
if(k.length==2&&k[0]===m){return k[1]
}}}}function h(){var k=f("sjedge");
return j(k,"cc")
}function a(k){c("#"+k+"-text").hide();
c("#"+k+"-select").show();
c.publish("/dprforms/formUpdate")
}function i(k){c.publish("/dprforms/"+k,c("#"+k).val())
}function g(l){var k=stjude.dprforms.dprutils.getParameterByName("country");
if(k){c("#"+l).val(k.toUpperCase());
a(l);
i(l)
}else{var m=h();
b(m)
}}function b(k){if(c("#country option[value='"+k+"']").length>0){if(k!=="US"){c("[name=country]").val(k).trigger("change")
}}}function d(l,k){c("#"+l).change(function(){if(!c("#"+l).is(":visible")){a(l)
}i(l)
});
c("#"+k).click(function(m){m.preventDefault();
a(l);
c("#"+l).focus()
});
c.subscribe("/dprforms/eventsReady",function(){if(c("#"+l).val()!="US"){a(l);
i(l)
}if(c("#"+l).val()!="CA"){i(l)
}})
}return{init:function(k,l){g(k);
d(k,l)
},initShipping:function(k,l){d(k,l)
}}
})(jQuery,window);