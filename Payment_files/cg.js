"use strict";var CartsGuruTracker=function(){this.baseUrl="https://api.carts.guru/javascript",this.isCorsSupported=this._isCorsSupported()};CartsGuruTracker.prototype.trackCart=function(r){if(""!==r.accountId&&null!==r.accountId&&r.accountId!==undefined){var t=this._deepClone(r);t._type="cart",this._track(t)}},CartsGuruTracker.prototype.trackOrder=function(r){var t=this._deepClone(r);t._type="order",this._track(t)},CartsGuruTracker.prototype._track=function(r){r.items&&"string"!=typeof r.items&&(r.items=JSON.stringify(r.items)),r.custom&&"string"!=typeof r.custom&&(r.custom=JSON.stringify(r.custom)),this.isCorsSupported?this._trackByRequest(r):this._trackByPixel(r)},CartsGuruTracker.prototype._deepClone=function(r){return JSON.parse(JSON.stringify(r))},CartsGuruTracker.prototype._trackByPixel=function(r){var t=this.baseUrl+"/__trk.gif?"+this._encodeParams(r),e=document.createElement("img");e.style.display="none",e.src=t,document.body.appendChild(e)},CartsGuruTracker.prototype._trackByRequest=function(r){var t=this.baseUrl+"/__trk?"+this._encodeParams(r),e=new XMLHttpRequest;e.open("GET",t),e.withCredentials=!0,e.send()},CartsGuruTracker.prototype._encodeParams=function(t){return Object.keys(t).map(function(r){return encodeURIComponent(r)+"="+encodeURIComponent(t[r])}).join("&")},CartsGuruTracker.prototype._isCorsSupported=function(){try{var r=new XMLHttpRequest;return XMLHttpRequest.isNormalizedObject&&r._object&&(r=r._object),"withCredentials"in r}catch(t){return!1}},CartsGuruTracker.prototype.doAsyncCalls=function(){if("undefined"==typeof window._cg)"complete"!==document.readyState&&"interactive"!==document.readyState&&(window.onload=function(){CartsGuru.tracker.doAsyncCalls()});else{var r=window._cg.slice();window._cg=[];for(var t=0;t<r.length;t+=1){var e=r[t],a=e[0],n=e[1];"string"==typeof a&&CartsGuru.tracker[a]!==undefined?CartsGuru.tracker[a](n):window._cg.push(e)}}},window.CartsGuru===undefined&&(window.CartsGuru={},CartsGuru.tracker=new CartsGuruTracker,CartsGuru.trackCart=function(r){CartsGuru.tracker.trackCart(r)},CartsGuru.trackOrder=function(r){CartsGuru.tracker.trackOrder(r)}),CartsGuru.tracker.doAsyncCalls();