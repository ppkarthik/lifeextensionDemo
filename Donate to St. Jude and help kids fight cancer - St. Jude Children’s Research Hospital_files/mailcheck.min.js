var Kicksend={mailcheck:{threshold:3,defaultDomains:"yahoo.com google.com hotmail.com gmail.com me.com aol.com mac.com live.com comcast.net googlemail.com msn.com hotmail.co.uk yahoo.co.uk facebook.com verizon.net sbcglobal.net att.net gmx.com mail.com".split(" "),defaultTopLevelDomains:"co.uk com net org info edu gov mil".split(" "),run:function(d){d.domains=d.domains||Kicksend.mailcheck.defaultDomains;
d.topLevelDomains=d.topLevelDomains||Kicksend.mailcheck.defaultTopLevelDomains;
d.distanceFunction=d.distanceFunction||Kicksend.sift3Distance;
var c=Kicksend.mailcheck.suggest(encodeURI(d.email),d.domains,d.topLevelDomains,d.distanceFunction);
c?d.suggested&&d.suggested(c):d.empty&&d.empty()
},suggest:function(f,e,h,g){f=f.toLowerCase();
f=this.splitEmail(f);
if(e=this.findClosestDomain(f.domain,e,g)){if(e!=f.domain){return{address:f.address,domain:e,full:f.address+"@"+e}
}}else{if(h=this.findClosestDomain(f.topLevelDomain,h),f.domain&&h&&h!=f.topLevelDomain){return e=f.domain,e=e.substring(0,e.lastIndexOf(f.topLevelDomain))+h,{address:f.address,domain:e,full:f.address+"@"+e}
}}return !1
},findClosestDomain:function(i,h,n){var m,l=99,j=null;
if(!i||!h){return !1
}n||(n=this.sift3Distance);
for(var k=0;
k<h.length;
k++){if(i===h[k]){return i
}m=n(i,h[k]);
m<l&&(l=m,j=h[k])
}return l<=this.threshold&&null!==j?j:!1
},sift3Distance:function(i,h){if(null==i||0===i.length){return null==h||0===h.length?0:h.length
}if(null==h||0===h.length){return i.length
}for(var n=0,m=0,l=0,j=0;
n+m<i.length&&n+l<h.length;
){if(i.charAt(n+m)==h.charAt(n+l)){j++
}else{for(var k=l=m=0;
5>k;
k++){if(n+k<i.length&&i.charAt(n+k)==h.charAt(n)){m=k;
break
}if(n+k<h.length&&i.charAt(n)==h.charAt(n+k)){l=k;
break
}}}n++
}return(i.length+h.length)/2-j
},splitEmail:function(g){g=g.split("@");
if(2>g.length){return !1
}for(var f=0;
f<g.length;
f++){if(""===g[f]){return !1
}}var j=g.pop(),i=j.split("."),h="";
if(0==i.length){return !1
}if(1==i.length){h=i[0]
}else{for(f=1;
f<i.length;
f++){h+=i[f]+"."
}2<=i.length&&(h=h.substring(0,h.length-1))
}return{topLevelDomain:h,domain:j,address:g.join("@")}
}}};
window.jQuery&&function(b){b.fn.mailcheck=function(f){var i=this;
if(f.suggested){var h=f.suggested;
f.suggested=function(c){h(i,c)
}
}if(f.empty){var g=f.empty;
f.empty=function(){g.call(null,i)
}
}f.email=this.val();
Kicksend.mailcheck.run(f)
}
}(jQuery);
var stjude=stjude||{};
stjude.dprforms=stjude.dprforms||{};
stjude.dprforms.mailcheck=(function(a){return{init:function(){a(document).on("keyup",".mailcheck-field",function(){var c=this;
b(function(){a(c).mailcheck({suggested:function(i,e){var h=i.attr("id")+"-mailcheck-suggestion";
var f=a("#"+h);
f.html(e.full);
var d=i.attr("id")+"-mailcheck-suggestion-pane";
var g=a("#"+d);
g.slideDown()
},empty:function(h){var g=h.attr("id")+"-mailcheck-suggestion";
var e=a("#"+g);
e.empty();
var d=h.attr("id")+"-mailcheck-suggestion-pane";
var f=a("#"+d);
f.slideUp()
}})
},500)
});
var b=(function(){var c=0;
return function(e,d){clearTimeout(c);
c=setTimeout(e,d)
}
})();
a(document).on("click",".mailcheck-suggestion",function(h){h.preventDefault();
var f=a(this).attr("id");
var g=f.substr(0,f.indexOf("-mailcheck-suggestion"));
var c=a("#"+g);
var e=a(this).html();
c.val(e).valid();
var d=g+"-mailcheck-suggestion-pane";
a("#"+d).slideUp()
})
}}
})(jQuery);