var stjude=stjude||{};
stjude.dprforms=stjude.dprforms||{};
stjude.dprforms.phone=(function(e){function d(j){e("#phoneNumber").rules("add",{required:true,accept:/[\(]?[0-9]{3}[\)]?\s[0-9]{3}[-]?[0-9]{4}/,messages:{required:j.phoneNumber,accept:j.phoneNumber}});
e("#intlPhoneNumber").rules("add",{required:true,cybersource:true,minlength:8,noEmoji:true,messages:{required:j.intlPhoneNumber,minlength:j.intlPhoneNumber}})
}function h(j,k){b(k)
}function a(k,j){if(j=="paypal"){e(".frm_phone").hide()
}if(j=="credit card"||j=="check"){e(".frm_phone").show()
}}function b(j){var k=j;
if(k=="US"){e(".international").hide();
e(".domestic").show()
}else{if(k=="CA"){e(".international").hide();
e(".domestic").show()
}else{e(".domestic").hide();
e(".international").show()
}}e.publish("/dprforms/formUpdate")
}function i(j,k){return j.replace(/\D/g,"").substring(0,k)
}function g(){var l=stjude.dprforms.dprutils.getParameterByName("phoneNumber1");
var k=stjude.dprforms.dprutils.getParameterByName("phoneNumber2");
var j=stjude.dprforms.dprutils.getParameterByName("phoneNumber3");
if(l&&k&&j){stjude.dprforms.dprutils.setElementWithValue("("+i(l,3)+") "+i(k,3)+"-"+i(j,4),"#phoneNumber")
}}function c(){var j=stjude.dprforms.dprutils.getParameterByName("intlPhoneNumber");
if(j){stjude.dprforms.dprutils.setElementWithValue(i(j,19),"#intlPhoneNumber")
}}function f(){g();
c()
}return{init:function(j){d(j);
e.subscribe("/dprforms/eventsReady",f);
e.subscribe("/dprforms/country",h);
e.subscribe("/dprforms/paymentMethodChange",a);
if(typeof(stjude.dprforms.mask)!="undefined"){stjude.dprforms.mask.maskPhone(e("#phoneNumber"))
}}}
})(jQuery);