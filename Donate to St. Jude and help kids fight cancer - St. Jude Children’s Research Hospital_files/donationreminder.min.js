var stjude=stjude||{};
stjude.dprforms=stjude.dprforms||{};
stjude.dprforms.donationreminder=(function(e){var a;
var h;
var b="905417a5-becc-42e4-9dfe-ca2ed4c65bb2";
var l;
var g;
var m;
var c;
var k;
var j=function f(){var o={};
o.email=e("#sendReminderEmail").val();
return o
};
var n=function(){c.prop("disabled",true);
c.hide();
k.show()
};
var i=function(){c.prop("disabled",false);
c.show();
k.hide()
};
var d=function(q){n();
var p=j();
var o=stjude.dprforms.libs.getTrueClientIpCookieValue();
var r={};
if(o!==undefined){r={"True-Client-IP":o}
}var s=a+"?postToken="+b;
e.ajax({type:"POST",url:s,headers:r,data:JSON.stringify(p),xhrFields:{withCredentials:true},crossDomain:true,contentType:"application/json",timeout:15000,success:function(v,t,u){e(location).attr("href","https://www.stjude.org/about-st-jude/reminder.html")
},error:function(y,u,v){var w;
var t;
try{w=JSON.parse(y.responseText);
t=w.reason;
if(t==null||typeof t=="undefined"){t="error"
}}catch(x){t=u
}if(t==="InvalidReminder"){m.text(l.InvalidReminder);
m.show()
}else{m.text(l.GenericEmailReminderError);
m.show()
}i()
},complete:function(t,u){}});
return false
};
return{init:function(p){g=p;
a=g.emailServiceUrl;
stjude.dprforms.magnificPopup.init(g.popUpSelector);
var o=e("#sendDonationReminderForm");
var q=e("button.mfp-close");
c=e("#sendReminderButton");
k=e("#sendingReminderNow");
m=e(".donationReminderAlert");
if(e.isEmptyObject(l)){l=stjude.dprforms.i18n.getErrorDictionary()
}var r=o.validate({ignore:".ignore",rules:{sendReminderEmail:{required:true},captcha:{required:true}},messages:{sendReminderEmail:{required:g.email},captcha:g.captcha},submitHandler:function(s){d(s)
},errorElement:"p"});
q.click(function(){m.hide();
r.resetForm()
})
}}
})(jQuery);